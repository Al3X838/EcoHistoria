{% extends "base.html" %}

{% block title %}Tareas - UCA Verde{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1 class="page-title">
            <span class="icon">ğŸ“š</span> Tareas y Actividades
        </h1>
        <p class="page-subtitle">Completa tareas educativas y gana puntos extra</p>
    </div>

    <!-- Feed Educativo -->
    <div class="section">
        <h2 class="section-title">ğŸ“° Feed Educativo</h2>
        <div class="tasks-grid">
            {% for contenido in contenidos %}
            <div class="task-card">
                <div class="task-icon">ğŸ“–</div>
                <div class="task-content">
                    <h3 class="task-title">{{ contenido.titulo }}</h3>
                    <p class="task-category">ArtÃ­culo Educativo</p>
                    <p class="task-description">{{ contenido.descripcion }}</p>
                </div>
                <a href="{{ contenido.link }}" target="_blank" class="btn btn-info btn-block">
                    Leer artÃ­culo ğŸ”—
                </a>
            </div>
            {% else %}
            <div class="col-12">
                <p class="text-muted">No hay contenido educativo disponible por el momento.</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Quizzes Disponibles -->
    <div class="section">
        <div class="tasks-grid">
            {% for quiz in quizzes %}
            <div class="task-card {% if quiz.id in completados %}completed{% endif %}">
                <div class="task-icon">ğŸ“</div>
                <div class="task-content">
                    <h3 class="task-title">{{ quiz.titulo }}</h3>
                    <p class="task-category">{{ quiz.categoria }}</p>
                    <div class="task-reward">
                        <span class="reward-icon">ğŸ’°</span>
                        <span class="reward-value">{{ quiz.puntos_recompensa }} puntos</span>
                    </div>
                </div>
                {% if quiz.id in completados %}
                <div class="task-status completed">
                    <span class="status-icon">âœ…</span> Completado
                </div>
                {% else %}
                <a href="{{ url_for('recycle.quiz', quiz_id=quiz.id) }}" class="btn btn-primary btn-block">
                    Comenzar Quiz
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Eventos y Voluntariados -->
    <div class="section">
        <h2 class="section-title">ğŸŒ Eventos y Voluntariados</h2>
        <div class="events-grid">
            <div class="event-card">
                <div class="event-header">
                    <span class="event-icon">ğŸ–ï¸</span>
                    <h3>Limpieza de Playa</h3>
                </div>
                <p class="event-description">Ãšnete a nuestra jornada de limpieza en las playas de El Salvador</p>
                <div class="event-points">+80 puntos</div>
                <a href="{{ url_for('recycle.eventos') }}" class="btn btn-secondary btn-block">Ver Detalles</a>
            </div>

            <div class="event-card">
                <div class="event-header">
                    <span class="event-icon">ğŸŒ³</span>
                    <h3>ReforestaciÃ³n</h3>
                </div>
                <p class="event-description">Planta Ã¡rboles y ayuda a reforestar zonas deforestadas</p>
                <div class="event-points">+100 puntos</div>
                <a href="{{ url_for('recycle.eventos') }}" class="btn btn-secondary btn-block">Ver Detalles</a>
            </div>

            <div class="event-card">
                <div class="event-header">
                    <span class="event-icon">ğŸ“</span>
                    <h3>Taller Ambiental</h3>
                </div>
                <p class="event-description">Aprende sobre sostenibilidad en nuestros talleres mensuales</p>
                <div class="event-points">+50 puntos</div>
                <a href="{{ url_for('recycle.eventos') }}" class="btn btn-secondary btn-block">Ver Detalles</a>
            </div>

            <div class="event-card">
                <div class="event-header">
                    <span class="event-icon">ğŸ’¡</span>
                    <h3>Charla de Sostenibilidad</h3>
                </div>
                <p class="event-description">Asiste a charlas sobre impacto ambiental y cambio climÃ¡tico</p>
                <div class="event-points">+30 puntos</div>
                <a href="{{ url_for('recycle.eventos') }}" class="btn btn-secondary btn-block">Ver Detalles</a>
            </div>
        </div>
    </div>

    <!-- DesafÃ­os Semanales -->
    <div class="section">
        <h2 class="section-title">ğŸ¯ DesafÃ­os Semanales</h2>
        <div class="challenges-list">
            <div class="challenge-card">
                <div class="challenge-icon">ğŸ”¥</div>
                <div class="challenge-content">
                    <h4>Racha de 7 dÃ­as</h4>
                    <p>MantÃ©n tu racha reciclando durante 7 dÃ­as consecutivos</p>
                    <div class="challenge-progress">
                        <div class="progress-bar">
                            <div class="progress-fill"
                                style="width: {{ (current_user.racha_actual / 7 * 100) if current_user.racha_actual < 7 else 100 }}%">
                            </div>
                        </div>
                        <span class="progress-text">{{ current_user.racha_actual }}/7 dÃ­as</span>
                    </div>
                </div>
                <div class="challenge-reward">+50 pts</div>
            </div>

            <div class="challenge-card">
                <div class="challenge-icon">â™»ï¸</div>
                <div class="challenge-content">
                    <h4>Recicla 10 items esta semana</h4>
                    <p>Registra 10 materiales reciclados antes del domingo</p>
                </div>
                <div class="challenge-reward">+30 pts</div>
            </div>

            <div class="challenge-card">
                <div class="challenge-icon">ğŸ“</div>
                <div class="challenge-content">
                    <h4>Completa 3 quizzes</h4>
                    <p>Responde correctamente 3 quizzes educativos</p>
                </div>
                <div class="challenge-reward">+40 pts</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}