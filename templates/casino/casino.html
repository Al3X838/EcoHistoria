{% extends "base.html" %}

{% block title %}Casino Verde - UCA Verde{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/casino.css') }}">
{% endblock %}

{% block content %}
<div class="container casino-container">
    <div class="page-header casino-header">
        <h1 class="page-title">
            <span class="icon">ğŸ°</span> Casino Verde
        </h1>
        <p class="page-subtitle">Prueba tu suerte y multiplica tus puntos</p>
        <div class="casino-balance">
            <span class="balance-label">Tu saldo:</span>
            <span class="balance-value">{{ current_user.puntos_totales }} pts</span>
        </div>
    </div>

    <!-- Advertencia de Juego Responsable -->
    <div class="responsible-gaming-warning">
        <span class="warning-icon">âš ï¸</span>
        <div class="warning-content">
            <strong>Juega Responsablemente:</strong>
            <p>Solo puedes apostar hasta el 30% de tu saldo. Los puntos apostados son reales. 
            El casino es solo para entretenimiento y no garantiza ganancias.</p>
        </div>
    </div>

    <!-- Juegos Disponibles -->
    <div class="games-grid">
        <a href="{{ url_for('casino.ruleta') }}" class="game-card ruleta">
            <div class="game-icon">ğŸ¡</div>
            <h2 class="game-title">Ruleta Verde</h2>
            <p class="game-description">Apuesta a nÃºmeros, colores o grupos. Multiplicadores hasta x35.</p>
            <div class="game-features">
                <span class="feature">ğŸ¯ NÃºmeros 0-36</span>
                <span class="feature">ğŸ”´ Rojo/Verde</span>
                <span class="feature">ğŸ“Š Par/Impar</span>
            </div>
            <div class="btn btn-primary btn-block">Jugar Ruleta</div>
        </a>

        <a href="{{ url_for('casino.slots') }}" class="game-card slots">
            <div class="game-icon">ğŸ°</div>
            <h2 class="game-title">Slots EcolÃ³gicos</h2>
            <p class="game-description">Gira 3 rodillos con sÃ­mbolos verdes. Â¡Jackpot x50!</p>
            <div class="game-features">
                <span class="feature">ğŸŒ± SÃ­mbolos Verdes</span>
                <span class="feature">ğŸ’° Jackpot x50</span>
                <span class="feature">âœ¨ Animaciones</span>
            </div>
            <div class="btn btn-primary btn-block">Jugar Slots</div>
        </a>

        <a href="{{ url_for('casino.dados') }}" class="game-card dados">
            <div class="game-icon">ğŸ²</div>
            <h2 class="game-title">Dados Verdes</h2>
            <p class="game-description">Lanza 2 dados y apuesta al resultado. MÃºltiples opciones.</p>
            <div class="game-features">
                <span class="feature">ğŸ² 2 Dados</span>
                <span class="feature">ğŸ¯ Suma Exacta</span>
                <span class="feature">ğŸ”¥ Dobles x8</span>
            </div>
            <div class="btn btn-primary btn-block">Jugar Dados</div>
        </a>
    </div>

    <!-- EstadÃ­sticas del Jugador -->
    <div class="casino-stats">
        <h2 class="section-title">ğŸ“Š Tus EstadÃ­sticas</h2>
        <div class="stats-cards">
            <div class="stat-card-casino">
                <div class="stat-icon">ğŸ’¸</div>
                <div class="stat-value">{{ total_apostado }}</div>
                <div class="stat-label">Total Apostado</div>
            </div>
            <div class="stat-card-casino">
                <div class="stat-icon">ğŸ’°</div>
                <div class="stat-value">{{ total_ganado }}</div>
                <div class="stat-label">Total Ganado</div>
            </div>
            <div class="stat-card-casino {% if total_ganado - total_apostado >= 0 %}positive{% else %}negative{% endif %}">
                <div class="stat-icon">ğŸ“ˆ</div>
                <div class="stat-value">{{ total_ganado - total_apostado }}</div>
                <div class="stat-label">Balance Neto</div>
            </div>
        </div>
    </div>

    <!-- Historial de Juegos -->
    <div class="casino-history">
        <h2 class="section-title">ğŸ® Historial Reciente</h2>
        {% if juegos %}
            <div class="history-table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Juego</th>
                            <th>Fecha</th>
                            <th>Apuesta</th>
                            <th>Resultado</th>
                            <th>Ganancia</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for juego in juegos %}
                        <tr>
                            <td>
                                {% if juego.tipo_juego == 'ruleta' %}ğŸ¡ Ruleta
                                {% elif juego.tipo_juego == 'slots' %}ğŸ° Slots
                                {% elif juego.tipo_juego == 'dados' %}ğŸ² Dados
                                {% endif %}
                            </td>
                            <td>{{ juego.fecha.strftime('%d/%m %H:%M') }}</td>
                            <td>{{ juego.apuesta }} pts</td>
                            <td>{{ juego.resultado }}</td>
                            <td class="{% if juego.ganancia > 0 %}text-success{% elif juego.ganancia < 0 %}text-danger{% endif %}">
                                {{ '+' if juego.ganancia > 0 else '' }}{{ juego.ganancia }} pts
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="empty-state">No has jugado aÃºn. Â¡Empieza ahora! ğŸ°</p>
        {% endif %}
    </div>
</div>
{% endblock %}